<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<!DOCTYPE html>
<html class="no-js">
<!--<![endif]-->
<head>
  <!-- Metas -->
  <meta charset="utf-8">
  <title>Zach Comstock Resume</title>
  <meta content="" name="description">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <!-- Css -->
  <link href="css/bootstrap.css" media="all" rel="stylesheet" type="text/css">
  <link href="css/owl-carousel/owl.carousel.css" media="all" rel="stylesheet">
  <link href="css/owl-carousel/owl.theme.css" media="all" rel="stylesheet">
  <link href="css/magnific-popup.css" media="all" rel="stylesheet" type=
  "text/css">
  <link href="css/font.css" media="all" rel="stylesheet" type="text/css">
  <link href="css/fontello.css" media="all" rel="stylesheet" type="text/css">
  <link href="css/base.css" media="all" rel="stylesheet" type="text/css">
  <link href="css/main.css" media="all" rel="stylesheet" type="text/css">
  <!--[if gte IE 9]>
            <link rel="stylesheet" type="text/css" href="css/ie9.css" />
        <![endif]-->
</head>
<body>
  <!-- Preloader -->
  <div id="loader">
    <!-- Preloader inner -->
    <div id="loaderInner">
      <div class="spinner"></div>
    </div><!-- End preloader inner -->
  </div><!-- End preloader-->
  <!--Wrapper-->
  <div class="margLTop margLBottom" id="wrapper">
    <!--Container-->
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <!--Portfolio single-->
          <section class="bgWhite ofsInBottom" id="portfolio">
            <!--Portfolio -->
            <div class="portfolio">
              <!--Main title-->
              <div class="main-title work-title">
                <h1>Runing space invaders with a homemade intel 8080 emulator
                and using opengl for graphics</h1>
                <div class="divider">
                  <div class="zigzag large clearfix" data-svg-drawing="yes">
                    <svg height="28" version="1.1" viewbox="0 0 69.172 14.975"
                    width="37" x="0px" xmlns="http://www.w3.org/2000/svg" y=
                    "0px">
                    <path d=
                    "M1.357,12.26 10.807,2.81 20.328,12.332 29.781,2.879 39.223,12.321 48.754,2.79 58.286,12.321 67.815,2.793"
                    style=
                    "stroke-dasharray: 93.9851, 93.9851; stroke-dashoffset: 0;"></path>
                    </svg>
                  </div>
                </div>
              </div><!--End main title-->
              <!--Content-->
              <div class="content">
                <!--Block content-->
                <div class="block-content">
                  <div class="block-nav-work margBottom">
                    <ul>
                      <li>
                        <a href="projectmanager.html"><i class=
                        "icon-left-open-mini"></i></a>
                      </li>
                      <li>
                        <a href="index.html#portfolio"><i class=
                        "icon-cancel"></i></a>
                      </li>
                      <li>
                        <a href="design.html"><i class=
                        "icon-right-open-mini"></i></a>
                      </li>
                    </ul>
                  </div>
                  <div class="block-single margBottom clearfix">
                    <div class="col-md-10 col-md-offset-1">
                      <h1 class="large-title margBSSmall">intel 8080
                      emulator</h1>
                      <p class="margBSSmall">Upon starting this project I
                      already had a decent understanding of C and C++. However,
                      I had only a vague understand of assembly code and
                      computer architecture. My objective in taking on this
                      project was to expand my understanding of computer
                      architecture and low-level memory management. For this
                      portion I used the first three sections of
                      http://emulator101.com/ as a reference to help guide my
                      progress.<br>
                      <br>
                      Since I only had rudimentary experience with Assembly, I
                      decided it would be best to write a disassembler for the
                      Space Invaders ROM. I chose to develop using C to ensure
                      portability, just in case I decide to port this project
                      to another device.<br>
                      <br>
                      The Space Invaders ROM package was separated into four
                      separate files. Each file represented a collection of
                      data stored on each ROM chip in the system, using a
                      whopping total of 8K memory. I used the site
                      http://computerarcheology.com to study the structure of
                      Space Invaders. In addition to the 8K of ROM, there
                      Here’s what the memory map looks like:<br>
                      <br>
                      0000-1FFF 8K ROM<br>
                      2000-23FF 1K RAM<br>
                      2400-3FF 7K Video RAM<br>
                      4000+ RAM<br>
                      <br>
                      After reading in the 8K ROM files into memory, I setup
                      loop and a giant switch statement to handle every opcode.
                      Then most of my time was spent scrolling through the
                      documentation provided in the Intel 8080 data sheet to
                      see what instruction each hex number represented. Once
                      finished my output looked like this:<br></p>
                      <div class="block-single margBottom clearfix">
                        <div class="col-md-10 col-md-offset-1"><img alt="" src=
                        "img/portfolio/large-1.jpg"></div>
                      </div>
                      <p>My disassembler just parsed through the ROM from
                      beginning to end, so any unused memory space or sections
                      of the ROM that aren’t normally executed would be
                      disassembled too. So it wasn’t perfect, but it gave me
                      some good ideas about how I needed to implement the
                      emulator.<br>
                      <br>
                      Next, I spent some more time studying the structure of
                      the Intel 8080. I learned that it had an 8-bit
                      accumulator and 6 8-bit registers (which could also be
                      used as 3 16-bit register pairs). It also had a 16-bit
                      Stack Pointer, 16-bit Program Counter, and 8-bits that
                      represented 5 different condition flags: Zero, Sign,
                      Parity, Carry, and Auxiliary Carry.<br>
                      <br>
                      I decided to create a struct that contained all the
                      information about the processors current state:
                      accumulator, registers, sp, pc, flags, ect… I also
                      included a reference to the 8K ROM I loaded into memory.
                      I found it a little silly that the emulator would end up
                      reading the data from memory and load a portion of that
                      memory into memory again, essentially duplicating the
                      data needlessly. At the time I couldn’t see any way
                      around this, so I just continued to implement every
                      opcode used by Space Invaders.<br>
                      <br>
                      As I was writing the opcodes, I realized that I was
                      performing a lot of binary arithmetic for modifying
                      register pairs. So, I decided to edit my struct to use a
                      union between one 16-bit integer to represent the pair
                      and an array containing 2 8-bit integers. Unfortunately,
                      this led to some confusion as to which 8-bit integer
                      represented the high-bit and the low-bit; most of the
                      bugs in my code were related to addressing the wrong
                      8-bits of a register pair. I’ve also since learned that
                      using unions will decrease the portability of the code,
                      so in my next project (Z80 emulation) I’ll avoid making
                      the same mistakes.<br>
                      <br>
                      I used the online Javascript Space Invader’s emulator at
                      https://bluishcoder.co.nz/js8080/ as a reference to test
                      the state of my processor after troublesome instructions
                      were passed; this helped me out a bunch! Finally, my
                      program arrived in a continuous loop, waiting for some
                      kind of input to be received. As excited as I was to have
                      my emulator working, I wanted visual proof. So I rotated
                      the bitmap saved in memory and output its contents using
                      the GLFW OpenGL library. Here are the results:<br>
                      <br></p>
                      <div class="block-single margBottom clearfix">
                        <div class="col-md-10 col-md-offset-1"><img alt="" src=
                        "img/portfolio/large-2.jpg"></div>
                      </div>
                      <hr>
                      <div class="block-single margBottom clearfix">
                        <div class="col-md-10 col-md-offset-1">
                          <ul class="social tCenter">
                            <li>
                              <a href=
                              "https://www.facebook.com/zach.comstock.9"><i class="icon-facebook">
                              </i></a>
                            </li>
                            <li>
                              <a href=
                              "https://www.linkedin.com/in/zachary-comstock-57931112b">
                              <i class="icon-linkedin"></i></a>
                            </li>
                          </ul>
                        </div>
                      </div>
                    </div><!--End block content-->
                  </div><!--End content-->
                  <!--Button-->
                  <div class="button ofsInTop tCenter">
                    <div class="divider">
                      <div class="zigzag large clearfix" data-svg-drawing=
                      "yes">
                        <svg height="28" version="1.1" viewbox=
                        "0 0 69.172 14.975" width="37" x="0px" xmlns=
                        "http://www.w3.org/2000/svg" y="0px">
                        <path d=
                        "M1.357,12.26 10.807,2.81 20.328,12.332 29.781,2.879 39.223,12.321 48.754,2.79 58.286,12.321 67.815,2.793"
                        style=
                        "stroke-dasharray: 93.9851, 93.9851; stroke-dashoffset: 0;"></path>
                        </svg>
                      </div>
                    </div><!--Row-->
                    <div class="row">
                      <div class="col-md-12">
                        <a class="but opc-3 ico" href=
                        "https://github.com/zzaz3/Intel-8080-Emulator">view
                        project on github</a>
                      </div>
                    </div><!--End row-->
                  </div><!--End button-->
                </div><!--End portfolio-->
              </div>
            </div>
          </section><!--End portfolio single-->
        </div>
      </div><!--End  row-->
    </div><!--End  container-->
  </div><!--End wrapper-->
  <!--Javascript-->
  <script src="js/jquery-1.11.3.min.js" type="text/javascript">
  </script> 
  <script src="js/jquery-migrate-1.2.1.js" type="text/javascript">
  </script> 
  <script src="js/owl.carousel.js" type="text/javascript">
  </script> 
  <script src="js/jquery.magnific-popup.js" type="text/javascript">
  </script> 
  <script src="js/jquery.easytabs.min.js" type="text/javascript">
  </script> 
  <script src="js/jquery.easing.1.3.js" type="text/javascript">
  </script> 
  <script src="js/modernizr.js" type="text/javascript">
  </script> 
  <script src="js/placeholders.min.js" type="text/javascript">
  </script> 
  <script src="js/script.js" type="text/javascript">
  </script> 
  <script>
  </script> <!-- Google analytics -->
   <!-- End google analytics -->
</body>
</html>